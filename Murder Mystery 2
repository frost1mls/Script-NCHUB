-- NCHUB - Murder Mystery 2 Edition
-- Base preservada + features do MM2

-- Criar tela
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NCHUB_MM2"
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Tela de carregamento
local loadingFrame = Instance.new("Frame")
loadingFrame.Name = "Loading"
loadingFrame.Size = UDim2.new(0, 150, 0, 70)
loadingFrame.Position = UDim2.new(0.5, -75, 0.5, -35)
loadingFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
loadingFrame.BackgroundTransparency = 0.1
loadingFrame.BorderSizePixel = 0
loadingFrame.Parent = screenGui
loadingFrame.ZIndex = 10

local loadingCorner = Instance.new("UICorner")
loadingCorner.CornerRadius = UDim.new(0, 12)
loadingCorner.Parent = loadingFrame

local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(1, 0, 1, 0)
loadingText.BackgroundTransparency = 1
loadingText.Text = "NCHUB - MM2"
loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
loadingText.Font = Enum.Font.GothamBold
loadingText.TextSize = 24
loadingText.Parent = loadingFrame

task.wait(2)

loadingFrame:TweenPosition(UDim2.new(0.5, -75, 1.5, 0), "Out", "Quad", 0.5, true)
task.wait(0.5)
loadingFrame:Destroy()

-- GUI Principal
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 550, 0, 400) -- Aumentei pra caber mais tabs
mainFrame.Position = UDim2.new(0.5, -275, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 28)
mainFrame.BorderSizePixel = 0
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 16)
mainCorner.Parent = mainFrame

-- TOP BAR
local topBar = Instance.new("Frame")
topBar.Name = "TopBar"
topBar.Size = UDim2.new(1, 0, 0, 45)
topBar.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
topBar.BorderSizePixel = 0
topBar.Parent = mainFrame

local topBarCorner = Instance.new("UICorner")
topBarCorner.CornerRadius = UDim.new(0, 16)
topBarCorner.Parent = topBar

-- Nome do Hub
local hubName = Instance.new("TextLabel")
hubName.Size = UDim2.new(0, 120, 1, 0)
hubName.Position = UDim2.new(0, 12, 0, 0)
hubName.BackgroundTransparency = 1
hubName.Text = "NCHUB - MM2"
hubName.TextColor3 = Color3.fromRGB(255, 255, 255)
hubName.Font = Enum.Font.GothamBold
hubName.TextSize = 16
hubName.TextXAlignment = Enum.TextXAlignment.Left
hubName.Parent = topBar

-- Container dos bot√µes
local buttonContainer = Instance.new("Frame")
buttonContainer.Size = UDim2.new(0, 150, 1, 0)
buttonContainer.Position = UDim2.new(1, -160, 0, 0)
buttonContainer.BackgroundTransparency = 1
buttonContainer.Parent = topBar

-- Bot√£o Config
local configBtn = Instance.new("TextButton")
configBtn.Size = UDim2.new(0, 30, 1, 0)
configBtn.Position = UDim2.new(0, 0, 0, 0)
configBtn.BackgroundTransparency = 1
configBtn.Text = "‚öôÔ∏è"
configBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
configBtn.TextSize = 20
configBtn.Font = Enum.Font.Gotham
configBtn.Parent = buttonContainer

-- Bot√£o Minimizar/Maximizar
local minMaxBtn = Instance.new("TextButton")
minMaxBtn.Size = UDim2.new(0, 30, 1, 0)
minMaxBtn.Position = UDim2.new(0, 35, 0, 0)
minMaxBtn.BackgroundTransparency = 1
minMaxBtn.Text = "‚àí"
minMaxBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
minMaxBtn.TextSize = 24
minMaxBtn.Font = Enum.Font.GothamBold
minMaxBtn.Parent = buttonContainer

-- Bot√£o Fechar
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 30, 1, 0)
closeBtn.Position = UDim2.new(0, 70, 0, 0)
closeBtn.BackgroundTransparency = 1
closeBtn.Text = "‚úï"
closeBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
closeBtn.TextSize = 18
closeBtn.Font = Enum.Font.GothamBold
closeBtn.Parent = buttonContainer

-- Bot√£o Ajuda
local helpBtn = Instance.new("TextButton")
helpBtn.Size = UDim2.new(0, 30, 1, 0)
helpBtn.Position = UDim2.new(0, 105, 0, 0)
helpBtn.BackgroundTransparency = 1
helpBtn.Text = "?"
helpBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
helpBtn.TextSize = 20
helpBtn.Font = Enum.Font.GothamBold
helpBtn.Parent = buttonContainer

-- √Årea de Conte√∫do (onde v√£o as tabs)
local contentArea = Instance.new("Frame")
contentArea.Name = "ContentArea"
contentArea.Size = UDim2.new(1, -20, 1, -60)
contentArea.Position = UDim2.new(0, 10, 0, 55)
contentArea.BackgroundTransparency = 1
contentArea.BorderSizePixel = 0
contentArea.Parent = mainFrame

-- Container das Tabs (bot√µes)
local tabContainer = Instance.new("Frame")
tabContainer.Name = "TabContainer"
tabContainer.Size = UDim2.new(1, 0, 0, 40)
tabContainer.Position = UDim2.new(0, 0, 0, 0)
tabContainer.BackgroundTransparency = 1
tabContainer.Parent = contentArea

-- Container do conte√∫do das tabs
local tabContentContainer = Instance.new("ScrollingFrame")
tabContentContainer.Name = "TabContent"
tabContentContainer.Size = UDim2.new(1, 0, 1, -50)
tabContentContainer.Position = UDim2.new(0, 0, 0, 45)
tabContentContainer.BackgroundTransparency = 1
tabContentContainer.BorderSizePixel = 0
tabContentContainer.ScrollBarThickness = 4
tabContentContainer.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100)
tabContentContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
tabContentContainer.Parent = contentArea

-- ==================== SISTEMA DE TABS ====================

local tabs = {}
local currentTab = nil

local function CreateTab(name, icon)
    local tabButton = Instance.new("TextButton")
    tabButton.Size = UDim2.new(0, 100, 1, 0)
    tabButton.Position = UDim2.new(0, (#tabs * 105), 0, 0)
    tabButton.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    tabButton.Text = icon .. " " .. name
    tabButton.TextColor3 = Color3.fromRGB(200, 200, 200)
    tabButton.Font = Enum.Font.GothamBold
    tabButton.TextSize = 14
    tabButton.Parent = tabContainer
    
    local tabCorner = Instance.new("UICorner")
    tabCorner.CornerRadius = UDim.new(0, 8)
    tabCorner.Parent = tabButton
    
    -- Container pro conte√∫do da tab
    local tabContent = Instance.new("Frame")
    tabContent.Name = "Tab_" .. name
    tabContent.Size = UDim2.new(1, 0, 0, 0)
    tabContent.Position = UDim2.new(0, 0, 0, 0)
    tabContent.BackgroundTransparency = 1
    tabContent.Visible = false
    tabContent.Parent = tabContentContainer
    tabContent.AutomaticSize = Enum.AutomaticSize.Y
    
    table.insert(tabs, {button = tabButton, content = tabContent, name = name})
    
    tabButton.MouseButton1Click:Connect(function()
        if currentTab then
            currentTab.content.Visible = false
            currentTab.button.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
        end
        
        currentTab = tabs[#tabs]
        currentTab.content.Visible = true
        currentTab.button.BackgroundColor3 = Color3.fromRGB(75, 75, 95)
        
        -- Atualiza canvas size
        tabContentContainer.CanvasSize = UDim2.new(0, 0, 0, currentTab.content.AbsoluteSize.Y + 20)
    end)
    
    -- Se for a primeira tab, seleciona
    if #tabs == 1 then
        currentTab = tabs[1]
        currentTab.content.Visible = true
        currentTab.button.BackgroundColor3 = Color3.fromRGB(75, 75, 95)
    end
    
    return tabContent
end

-- ==================== FUN√á√ïES AUXILIARES ====================

local function CreateToggle(parent, text, default, callback)
    local yPos = #parent:GetChildren() * 35
    
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, -10, 0, 30)
    frame.Position = UDim2.new(0, 5, 0, yPos)
    frame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    frame.Parent = parent
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = frame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0, 200, 1, 0)
    label.Position = UDim2.new(0, 10, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Font = Enum.Font.Gotham
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame
    
    local toggleBtn = Instance.new("TextButton")
    toggleBtn.Size = UDim2.new(0, 50, 0, 25)
    toggleBtn.Position = UDim2.new(1, -60, 0.5, -12)
    toggleBtn.BackgroundColor3 = default and Color3.fromRGB(100, 200, 100) or Color3.fromRGB(80, 80, 90)
    toggleBtn.Text = default and "ON" or "OFF"
    toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggleBtn.Font = Enum.Font.GothamBold
    toggleBtn.TextSize = 12
    toggleBtn.Parent = frame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 4)
    toggleCorner.Parent = toggleBtn
    
    local state = default
    
    toggleBtn.MouseButton1Click:Connect(function()
        state = not state
        toggleBtn.BackgroundColor3 = state and Color3.fromRGB(100, 200, 100) or Color3.fromRGB(80, 80, 90)
        toggleBtn.Text = state and "ON" or "OFF"
        callback(state)
    end)
    
    return frame
end

local function CreateButton(parent, text, callback)
    local yPos = #parent:GetChildren() * 40
    
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -20, 0, 35)
    btn.Position = UDim2.new(0, 10, 0, yPos)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 65)
    btn.Text = text
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.Parent = parent
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = btn
    
    btn.MouseButton1Click:Connect(callback)
    
    return btn
end

local function CreateSlider(parent, text, min, max, default, callback)
    local yPos = #parent:GetChildren() * 60
    
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, -10, 0, 50)
    frame.Position = UDim2.new(0, 5, 0, yPos)
    frame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    frame.Parent = parent
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = frame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -20, 0, 20)
    label.Position = UDim2.new(0, 10, 0, 5)
    label.BackgroundTransparency = 1
    label.Text = text .. ": " .. default
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Font = Enum.Font.Gotham
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame
    
    local slider = Instance.new("Frame")
    slider.Size = UDim2.new(1, -30, 0, 4)
    slider.Position = UDim2.new(0, 15, 0, 30)
    slider.BackgroundColor3 = Color3.fromRGB(80, 80, 100)
    slider.Parent = frame
    
    local fill = Instance.new("Frame")
    fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
    fill.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
    fill.Parent = slider
    
    -- Slider logic simplified for this example
    callback(default)
    
    return frame
end

-- ==================== CRIAR TABS DO MM2 ====================

-- Tab 1: MAIN [citation:3][citation:5]
local mainTab = CreateTab("MAIN", "üéØ")
CreateButton(mainTab, "üé≠ Auto Role", function()
    print("Auto Role ativado")
    -- L√≥gica pra detectar role automaticamente
end)

CreateToggle(mainTab, "üí∞ Auto Farm", false, function(state)
    print("Auto Farm:", state)
    if state then
        -- Ativar farm autom√°tico de coins [citation:1]
    end
end)

CreateButton(mainTab, "üîÑ Refresh Players", function()
    print("Atualizando lista de players")
end)

-- Tab 2: ESP [citation:1][citation:3]
local espTab = CreateTab("ESP", "üëÅÔ∏è")
CreateToggle(espTab, "üî¥ Murderer ESP", true, function(state)
    print("Murderer ESP:", state)
    -- Highlight assassino
end)

CreateToggle(espTab, "üîµ Sheriff ESP", true, function(state)
    print("Sheriff ESP:", state)
end)

CreateToggle(espTab, "üü¢ Innocent ESP", false, function(state)
    print("Innocent ESP:", state)
end)

CreateToggle(espTab, "üî´ Gun ESP", true, function(state)
    print("Gun ESP:", state)
end)

-- Tab 3: PLAYER [citation:3][citation:5]
local playerTab = CreateTab("PLAYER", "üèÉ")
CreateSlider(playerTab, "üëü WalkSpeed", 16, 120, 16, function(value)
    print("WalkSpeed:", value)
    game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = value
end)

CreateSlider(playerTab, "üöÄ JumpPower", 50, 200, 50, function(value)
    print("JumpPower:", value)
    game.Players.LocalPlayer.Character.Humanoid.JumpPower = value
end)

CreateToggle(playerTab, "üëª Noclip", false, function(state)
    print("Noclip:", state)
    -- L√≥gica de noclip
end)

CreateToggle(playerTab, "üïäÔ∏è Fly", false, function(state)
    print("Fly:", state)
    -- L√≥gica de voo
end)

CreateToggle(playerTab, "‚òÅÔ∏è Infinite Jump", false, function(state)
    print("Infinite Jump:", state)
    -- L√≥gica de pulo infinito
end)

-- Tab 4: COMBAT [citation:1][citation:8]
local combatTab = CreateTab("COMBAT", "‚öîÔ∏è")
CreateToggle(combatTab, "üéØ Aimbot (Sheriff)", true, function(state)
    print("Aimbot Sheriff:", state)
end)

CreateToggle(combatTab, "üî´ Silent Aim", false, function(state)
    print("Silent Aim:", state)
end)

CreateButton(combatTab, "üíÄ Kill All", function()
    print("Kill All ativado")
    -- L√≥gica pra matar todos
end)

CreateToggle(combatTab, "ü§ñ Auto Shoot", true, function(state)
    print("Auto Shoot:", state)
end)

-- Tab 5: INNOCENT [citation:3]
local innocentTab = CreateTab("INNOCENT", "üõ°Ô∏è")
CreateToggle(innocentTab, "ü§ñ Auto Get Gun", true, function(state)
    print("Auto Get Gun:", state)
end)

CreateButton(innocentTab, "üî´ Get Gun Now", function()
    print("Pegando arma...")
    -- Teleport pra arma
end)

CreateToggle(innocentTab, "üéØ Auto Shoot Murderer", true, function(state)
    print("Auto Shoot Murderer:", state)
end)

-- Tab 6: MURDERER [citation:3][citation:5]
local murdererTab = CreateTab("MURDERER", "üî™")
CreateToggle(murdererTab, "üéØ Aimbot (Sheriff)", true, function(state)
    print("Aimbot Sheriff:", state)
end)

CreateButton(murdererTab, "üë§ Kill Selected", function()
    print("Matando player selecionado")
end)

CreateButton(murdererTab, "üíÄ Kill All", function()
    print("Kill All como Murderer")
end)

-- Tab 7: SHERIFF [citation:3]
local sheriffTab = CreateTab("SHERIFF", "ü§†")
CreateToggle(sheriffTab, "üéØ Aimbot (Murderer)", true, function(state)
    print("Aimbot Murderer:", state)
end)

CreateButton(sheriffTab, "üî´ Shoot Murderer", function()
    print("Atirando no Murderer")
end)

CreateToggle(sheriffTab, "üèÜ Insta Win", false, function(state)
    print("Insta Win:", state)
end)

-- Tab 8: TELEPORT [citation:1][citation:3]
local tpTab = CreateTab("TELEPORT", "üìç")
CreateButton(tpTab, "üîµ TP to Sheriff", function()
    print("Teleportando pro Sheriff")
end)

CreateButton(tpTab, "üî¥ TP to Murderer", function()
    print("Teleportando pro Murderer")
end)

CreateButton(tpTab, "üî´ TP to Gun", function()
    print("Teleportando pra arma")
end)

CreateButton(tpTab, "üè† TP to Lobby", function()
    print("Voltando pro lobby")
end)

-- Tab 9: SETTINGS [citation:3][citation:5]
local settingsTab = CreateTab("SETTINGS", "‚öôÔ∏è")
CreateToggle(settingsTab, "üöÄ FPS Boost", true, function(state)
    print("FPS Boost:", state)
    if state then
        settings().Rendering.QualityLevel = 1
    else
        settings().Rendering.QualityLevel = 10
    end
end)

CreateToggle(settingsTab, "üí° Full Bright", false, function(state)
    print("Full Bright:", state)
    game.Lighting.Brightness = state and 2 or 1
    game.Lighting.Ambient = state and Color3.new(1, 1, 1) or Color3.new(0.5, 0.5, 0.5)
end)

CreateToggle(settingsTab, "üí§ Anti AFK", true, function(state)
    print("Anti AFK:", state)
    -- L√≥gica anti-afk
end)

CreateButton(settingsTab, "üîÑ Rejoin Server", function()
    print("Rejoinando...")
    game:GetService("TeleportService"):Teleport(game.PlaceId, game.Players.LocalPlayer)
end)

CreateButton(settingsTab, "üìâ Server Hop", function()
    print("Trocando de servidor...")
end)

-- ==================== FUNCIONALIDADES BASE ====================

-- Dragging
local dragging = false
local dragStart
local startPos

topBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

topBar.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging then
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end
end)

-- Fechar
closeBtn.MouseButton1Click:Connect(function() screenGui:Destroy() end)
closeBtn.TouchTap:Connect(function() screenGui:Destroy() end)

-- Minimizar/Maximizar
local minimized = false
local originalSize = mainFrame.Size
local minimizedSize = UDim2.new(0, 550, 0, 45)

minMaxBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        mainFrame:TweenSize(minimizedSize, "Out", "Quad", 0.2, true)
        minMaxBtn.Text = "+"
        contentArea.Visible = false
    else
        mainFrame:TweenSize(originalSize, "Out", "Quad", 0.2, true)
        minMaxBtn.Text = "‚àí"
        contentArea.Visible = true
    end
end)

-- Config e Ajuda
configBtn.MouseButton1Click:Connect(function()
    print("Abrir configura√ß√µes do MM2")
end)

helpBtn.MouseButton1Click:Connect(function()
    print("NCHUB - Murder Mystery 2 v1.0")
    print("Features: ESP, Aimbot, Auto Farm, Teleports, Kill All e mais!")
end)

-- Inicializa canvas size
task.wait(0.1)
if currentTab then
    tabContentContainer.CanvasSize = UDim2.new(0, 0, 0, currentTab.content.AbsoluteSize.Y + 20)
end

print("‚úÖ NCHUB - MM2 carregado com sucesso!")
