-- NCHUB - Biblioteca Personaliz√°vel (Minimizar reduz o GUI todo)
-- Top bar com tudo, conte√∫do livre embaixo

-- Criar tela
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NCHUB"
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Tela de carregamento
local loadingFrame = Instance.new("Frame")
loadingFrame.Name = "Loading"
loadingFrame.Size = UDim2.new(0, 150, 0, 70)
loadingFrame.Position = UDim2.new(0.5, -75, 0.5, -35)
loadingFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
loadingFrame.BackgroundTransparency = 0.1
loadingFrame.BorderSizePixel = 0
loadingFrame.Parent = screenGui
loadingFrame.ZIndex = 10

local loadingCorner = Instance.new("UICorner")
loadingCorner.CornerRadius = UDim.new(0, 12)
loadingCorner.Parent = loadingFrame

local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(1, 0, 1, 0)
loadingText.BackgroundTransparency = 1
loadingText.Text = "NCHUB"
loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
loadingText.Font = Enum.Font.GothamBold
loadingText.TextSize = 28
loadingText.Parent = loadingFrame

-- Aguardar 2 segundos
task.wait(2)

loadingFrame:TweenPosition(UDim2.new(0.5, -75, 1.5, 0), "Out", "Quad", 0.5, true)
task.wait(0.5)
loadingFrame:Destroy()

-- GUI Principal
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 420, 0, 340) -- Tamanho normal
mainFrame.Position = UDim2.new(0.5, -210, 0.5, -170)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 28)
mainFrame.BorderSizePixel = 0
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 16)
mainCorner.Parent = mainFrame

-- TOP BAR
local topBar = Instance.new("Frame")
topBar.Name = "TopBar"
topBar.Size = UDim2.new(1, 0, 0, 45)
topBar.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
topBar.BorderSizePixel = 0
topBar.Parent = mainFrame

local topBarCorner = Instance.new("UICorner")
topBarCorner.CornerRadius = UDim.new(0, 16)
topBarCorner.Parent = topBar

-- Nome do Hub
local hubName = Instance.new("TextLabel")
hubName.Size = UDim2.new(0, 120, 1, 0)
hubName.Position = UDim2.new(0, 12, 0, 0)
hubName.BackgroundTransparency = 1
hubName.Text = "NCHUB"
hubName.TextColor3 = Color3.fromRGB(255, 255, 255)
hubName.Font = Enum.Font.GothamBold
hubName.TextSize = 18
hubName.TextXAlignment = Enum.TextXAlignment.Left
hubName.Parent = topBar

-- Container dos bot√µes
local buttonContainer = Instance.new("Frame")
buttonContainer.Size = UDim2.new(0, 120, 1, 0)
buttonContainer.Position = UDim2.new(1, -130, 0, 0)
buttonContainer.BackgroundTransparency = 1
buttonContainer.Parent = topBar

-- Bot√£o Config
local configBtn = Instance.new("TextButton")
configBtn.Size = UDim2.new(0, 30, 1, 0)
configBtn.Position = UDim2.new(0, 0, 0, 0)
configBtn.BackgroundTransparency = 1
configBtn.Text = "‚öôÔ∏è"
configBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
configBtn.TextSize = 20
configBtn.Font = Enum.Font.Gotham
configBtn.Parent = buttonContainer

-- Bot√£o Minimizar/Maximizar
local minMaxBtn = Instance.new("TextButton")
minMaxBtn.Size = UDim2.new(0, 30, 1, 0)
minMaxBtn.Position = UDim2.new(0, 30, 0, 0)
minMaxBtn.BackgroundTransparency = 1
minMaxBtn.Text = "‚àí"
minMaxBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
minMaxBtn.TextSize = 24
minMaxBtn.Font = Enum.Font.GothamBold
minMaxBtn.Parent = buttonContainer

-- Bot√£o Fechar
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 30, 1, 0)
closeBtn.Position = UDim2.new(0, 60, 0, 0)
closeBtn.BackgroundTransparency = 1
closeBtn.Text = "‚úï"
closeBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
closeBtn.TextSize = 18
closeBtn.Font = Enum.Font.GothamBold
closeBtn.Parent = buttonContainer

-- Bot√£o Ajuda
local helpBtn = Instance.new("TextButton")
helpBtn.Size = UDim2.new(0, 30, 1, 0)
helpBtn.Position = UDim2.new(0, 90, 0, 0)
helpBtn.BackgroundTransparency = 1
helpBtn.Text = "?"
helpBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
helpBtn.TextSize = 20
helpBtn.Font = Enum.Font.GothamBold
helpBtn.Parent = buttonContainer

-- √Årea de Conte√∫do
local contentArea = Instance.new("ScrollingFrame")
contentArea.Name = "ContentArea"
contentArea.Size = UDim2.new(1, -20, 1, -60)
contentArea.Position = UDim2.new(0, 10, 0, 55)
contentArea.BackgroundTransparency = 1
contentArea.BorderSizePixel = 0
contentArea.ScrollBarThickness = 4
contentArea.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100)
contentArea.CanvasSize = UDim2.new(0, 0, 0, 150)
contentArea.Parent = mainFrame

-- Dragging
local dragging = false
local dragStart
local startPos

topBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

topBar.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging then
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end
end)

-- Fechar
closeBtn.MouseButton1Click:Connect(function() screenGui:Destroy() end)
closeBtn.TouchTap:Connect(function() screenGui:Destroy() end)

-- Minimizar/Maximizar (reduz o GUI todo)
local minimized = false
local originalSize = mainFrame.Size
local minimizedSize = UDim2.new(0, 420, 0, 45) -- S√≥ top bar vis√≠vel

minMaxBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        mainFrame:TweenSize(minimizedSize, "Out", "Quad", 0.2, true)
        minMaxBtn.Text = "+"
        contentArea.Visible = false
    else
        mainFrame:TweenSize(originalSize, "Out", "Quad", 0.2, true)
        minMaxBtn.Text = "‚àí"
        contentArea.Visible = true
    end
end)

-- Config e Ajuda agora funcionando
configBtn.MouseButton1Click:Connect(function()
    print("Abrir configura√ß√µes")
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Configura√ß√µes - Em breve!",
        Duration = 2
    })
end)

helpBtn.MouseButton1Click:Connect(function()
    print("Ajuda - NCHUB v1.0")
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "NCHUB - Murder Mystery 2\nVers√£o 1.0",
        Duration = 3
    })
end)

-- Atualizar canvas size
local function UpdateCanvas()
    local height = 0
    for _, v in pairs(contentArea:GetChildren()) do
        if v:IsA("Frame") or v:IsA("TextButton") then
            height = height + v.Size.Y.Offset + 10
        elseif v:IsA("TextLabel") then
            height = height + v.Size.Y.Offset + 5
        end
    end
    contentArea.CanvasSize = UDim2.new(0, 0, 0, height + 20)
end

-- ========== VARI√ÅVEIS DAS FUN√á√ïES ==========

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- Estados das fun√ß√µes
local functions = {
    autoGun = false,
    killAll = false,
    espMurder = false,
    espSheriff = false,
    espInnocent = false,
    autoCollect = false,
    wallhack = false,
    autoShoot = false,
    fly = false,
    noclip = false,
    infiniteJump = false,
    fullBright = false,
    antiAfk = false
}

-- ========== FUN√á√ïES PARA CRIAR BOT√ïES ==========

-- Fun√ß√£o para criar bot√£o
local function CriarBotao(texto, cor, callback)
    local yPos = #contentArea:GetChildren() * 45
    
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -20, 0, 35)
    btn.Position = UDim2.new(0, 10, 0, yPos)
    btn.BackgroundColor3 = cor or Color3.fromRGB(50, 50, 70)
    btn.Text = texto
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.Parent = contentArea
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = btn
    
    btn.MouseButton1Click:Connect(callback)
    btn.TouchTap:Connect(callback)
    
    return btn
end

-- Fun√ß√£o para criar toggle
local function CriarToggle(texto, varName)
    local yPos = #contentArea:GetChildren() * 45
    
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, -20, 0, 35)
    frame.Position = UDim2.new(0, 10, 0, yPos)
    frame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    frame.Parent = contentArea
    
    local frameCorner = Instance.new("UICorner")
    frameCorner.CornerRadius = UDim.new(0, 8)
    frameCorner.Parent = frame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0, 200, 1, 0)
    label.Position = UDim2.new(0, 10, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = texto
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Font = Enum.Font.Gotham
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame
    
    local toggleBtn = Instance.new("TextButton")
    toggleBtn.Size = UDim2.new(0, 50, 0, 25)
    toggleBtn.Position = UDim2.new(1, -60, 0.5, -12)
    toggleBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 90)
    toggleBtn.Text = "OFF"
    toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggleBtn.Font = Enum.Font.GothamBold
    toggleBtn.TextSize = 12
    toggleBtn.Parent = frame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 4)
    toggleCorner.Parent = toggleBtn
    
    toggleBtn.MouseButton1Click:Connect(function()
        functions[varName] = not functions[varName]
        if functions[varName] then
            toggleBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
            toggleBtn.Text = "ON"
        else
            toggleBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 90)
            toggleBtn.Text = "OFF"
        end
        
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "NCHUB",
            Text = texto .. " " .. (functions[varName] and "ativado" or "desativado"),
            Duration = 1
        })
    end)
    
    toggleBtn.TouchTap:Connect(function()
        functions[varName] = not functions[varName]
        if functions[varName] then
            toggleBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
            toggleBtn.Text = "ON"
        else
            toggleBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 90)
            toggleBtn.Text = "OFF"
        end
        
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "NCHUB",
            Text = texto .. " " .. (functions[varName] and "ativado" or "desativado"),
            Duration = 1
        })
    end)
    
    return frame
end

-- ========== ADICIONANDO OS BOT√ïES QUE VOC√ä PEDIU ==========

-- T√≠tulo
local titulo = Instance.new("TextLabel")
titulo.Size = UDim2.new(1, -20, 0, 30)
titulo.Position = UDim2.new(0, 10, 0, 10)
titulo.BackgroundTransparency = 1
titulo.Text = "=== FUN√á√ïES MM2 ==="
titulo.TextColor3 = Color3.fromRGB(255, 255, 255)
titulo.Font = Enum.Font.GothamBold
titulo.TextSize = 16
titulo.Parent = contentArea

-- AUTO
CriarBotao("üî´ AUTO PEGAR GUN", Color3.fromRGB(50, 150, 200), function()
    functions.autoGun = not functions.autoGun
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Auto Gun: " .. (functions.autoGun and "ON" or "OFF"),
        Duration = 1
    })
end)

CriarBotao("üíÄ KILL ALL", Color3.fromRGB(200, 50, 50), function()
    functions.killAll = not functions.killAll
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Kill All: " .. (functions.killAll and "ON" or "OFF"),
        Duration = 1
    })
end)

CriarBotao("üí∞ AUTO COLETAR MOEDAS", Color3.fromRGB(50, 200, 50), function()
    functions.autoCollect = not functions.autoCollect
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Auto Coletar: " .. (functions.autoCollect and "ON" or "OFF"),
        Duration = 1
    })
end)

CriarBotao("üî´ AUTO SHOT MURDER", Color3.fromRGB(200, 100, 50), function()
    functions.autoShoot = not functions.autoShoot
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Auto Shot: " .. (functions.autoShoot and "ON" or "OFF"),
        Duration = 1
    })
end)

-- ESP
CriarToggle("üî¥ ESP MURDER", "espMurder")
CriarToggle("üîµ ESP XERIFE", "espSheriff")
CriarToggle("üü¢ ESP INOCENTES", "espInnocent")

-- WALLHACK
CriarToggle("üß± PAREDES SEMI INVIS√çVEIS", "wallhack")

-- PLAYER
CriarBotao("üïäÔ∏è ATIVAR FLY", Color3.fromRGB(100, 100, 200), function()
    functions.fly = not functions.fly
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Fly: " .. (functions.fly and "ON" or "OFF"),
        Duration = 1
    })
end)

CriarBotao("üëª ATIVAR NOCLIP", Color3.fromRGB(150, 50, 150), function()
    functions.noclip = not functions.noclip
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Noclip: " .. (functions.noclip and "ON" or "OFF"),
        Duration = 1
    })
end)

CriarBotao("‚òÅÔ∏è INFINITE JUMP", Color3.fromRGB(50, 150, 150), function()
    functions.infiniteJump = not functions.infiniteJump
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Infinite Jump: " .. (functions.infiniteJump and "ON" or "OFF"),
        Duration = 1
    })
end)

-- TELEPORTES
CriarBotao("üè† TELEPORT LOBBY", Color3.fromRGB(200, 150, 50), function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Teleportando pro Lobby...",
        Duration = 1
    })
end)

CriarBotao("üó∫Ô∏è TELEPORT MAPA", Color3.fromRGB(150, 200, 50), function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Teleportando pro Mapa...",
        Duration = 1
    })
end)

CriarBotao("üî´ TELEPORT ARMA", Color3.fromRGB(50, 200, 200), function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Teleportando pra arma...",
        Duration = 1
    })
end)

-- OUTROS
CriarBotao("üí° FULL BRIGHT", Color3.fromRGB(200, 200, 50), function()
    functions.fullBright = not functions.fullBright
    if functions.fullBright then
        game.Lighting.Brightness = 2
        game.Lighting.Ambient = Color3.new(1, 1, 1)
    else
        game.Lighting.Brightness = 1
        game.Lighting.Ambient = Color3.new(0.5, 0.5, 0.5)
    end
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Full Bright: " .. (functions.fullBright and "ON" or "OFF"),
        Duration = 1
    })
end)

CriarBotao("üí§ ANTI AFK", Color3.fromRGB(100, 100, 100), function()
    functions.antiAfk = not functions.antiAfk
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Anti AFK: " .. (functions.antiAfk and "ON" or "OFF"),
        Duration = 1
    })
end)

CriarBotao("üîÑ REJOIN SERVER", Color3.fromRGB(150, 150, 150), function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Reconectando...",
        Duration = 1
    })
end)

-- Atualizar canvas
UpdateCanvas()

-- ========== LOOPS DAS FUN√á√ïES ==========

RunService.Heartbeat:Connect(function()
    -- ESP Murder (exemplo)
    if functions.espMurder then
        -- Colocar l√≥gica do ESP aqui
    end
    
    -- ESP Sheriff
    if functions.espSheriff then
        -- Colocar l√≥gica aqui
    end
    
    -- ESP Inocente
    if functions.espInnocent then
        -- Colocar l√≥gica aqui
    end
    
    -- Auto Coletar
    if functions.autoCollect then
        -- Colocar l√≥gica aqui
    end
    
    -- Wallhack
    if functions.wallhack then
        -- Colocar l√≥gica aqui
    end
    
    -- Fly
    if functions.fly then
        -- Colocar l√≥gica aqui
    end
    
    -- Noclip
    if functions.noclip then
        -- Colocar l√≥gica aqui
    end
end)

-- Anti AFK
game:GetService("Players").LocalPlayer.Idled:Connect(function()
    if functions.antiAfk then
        local VirtualUser = game:GetService("VirtualUser")
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
    end
end)

-- Infinite Jump
UserInputService.JumpRequest:Connect(function()
    if functions.infiniteJump and LocalPlayer.Character then
        local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid:ChangeState("Jumping")
        end
    end
end)

print("‚úÖ NCHUB carregado com todas as fun√ß√µes!")
