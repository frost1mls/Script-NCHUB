-- NCHUB - Biblioteca Personaliz√°vel (Minimizar reduz o GUI todo)
-- Top bar com tudo, conte√∫do livre embaixo

-- Criar tela
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NCHUB"
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Tela de carregamento
local loadingFrame = Instance.new("Frame")
loadingFrame.Name = "Loading"
loadingFrame.Size = UDim2.new(0, 150, 0, 70)
loadingFrame.Position = UDim2.new(0.5, -75, 0.5, -35)
loadingFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
loadingFrame.BackgroundTransparency = 0.1
loadingFrame.BorderSizePixel = 0
loadingFrame.Parent = screenGui
loadingFrame.ZIndex = 10

local loadingCorner = Instance.new("UICorner")
loadingCorner.CornerRadius = UDim.new(0, 12)
loadingCorner.Parent = loadingFrame

local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(1, 0, 1, 0)
loadingText.BackgroundTransparency = 1
loadingText.Text = "NCHUB"
loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
loadingText.Font = Enum.Font.GothamBold
loadingText.TextSize = 28
loadingText.Parent = loadingFrame

-- Aguardar 2 segundos
task.wait(2)

loadingFrame:TweenPosition(UDim2.new(0.5, -75, 1.5, 0), "Out", "Quad", 0.5, true)
task.wait(0.5)
loadingFrame:Destroy()

-- GUI Principal
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 420, 0, 340) -- Tamanho normal
mainFrame.Position = UDim2.new(0.5, -210, 0.5, -170)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 28)
mainFrame.BorderSizePixel = 0
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 16)
mainCorner.Parent = mainFrame

-- TOP BAR
local topBar = Instance.new("Frame")
topBar.Name = "TopBar"
topBar.Size = UDim2.new(1, 0, 0, 45)
topBar.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
topBar.BorderSizePixel = 0
topBar.Parent = mainFrame

local topBarCorner = Instance.new("UICorner")
topBarCorner.CornerRadius = UDim.new(0, 16)
topBarCorner.Parent = topBar

-- Nome do Hub
local hubName = Instance.new("TextLabel")
hubName.Size = UDim2.new(0, 120, 1, 0)
hubName.Position = UDim2.new(0, 12, 0, 0)
hubName.BackgroundTransparency = 1
hubName.Text = "NCHUB"
hubName.TextColor3 = Color3.fromRGB(255, 255, 255)
hubName.Font = Enum.Font.GothamBold
hubName.TextSize = 18
hubName.TextXAlignment = Enum.TextXAlignment.Left
hubName.Parent = topBar

-- Container dos bot√µes
local buttonContainer = Instance.new("Frame")
buttonContainer.Size = UDim2.new(0, 120, 1, 0)
buttonContainer.Position = UDim2.new(1, -130, 0, 0)
buttonContainer.BackgroundTransparency = 1
buttonContainer.Parent = topBar

-- Bot√£o Config
local configBtn = Instance.new("TextButton")
configBtn.Size = UDim2.new(0, 30, 1, 0)
configBtn.Position = UDim2.new(0, 0, 0, 0)
configBtn.BackgroundTransparency = 1
configBtn.Text = "‚öôÔ∏è"
configBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
configBtn.TextSize = 20
configBtn.Font = Enum.Font.Gotham
configBtn.Parent = buttonContainer

-- Bot√£o Minimizar/Maximizar
local minMaxBtn = Instance.new("TextButton")
minMaxBtn.Size = UDim2.new(0, 30, 1, 0)
minMaxBtn.Position = UDim2.new(0, 30, 0, 0)
minMaxBtn.BackgroundTransparency = 1
minMaxBtn.Text = "‚àí"
minMaxBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
minMaxBtn.TextSize = 24
minMaxBtn.Font = Enum.Font.GothamBold
minMaxBtn.Parent = buttonContainer

-- Bot√£o Fechar
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 30, 1, 0)
closeBtn.Position = UDim2.new(0, 60, 0, 0)
closeBtn.BackgroundTransparency = 1
closeBtn.Text = "‚úï"
closeBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
closeBtn.TextSize = 18
closeBtn.Font = Enum.Font.GothamBold
closeBtn.Parent = buttonContainer

-- Bot√£o Ajuda
local helpBtn = Instance.new("TextButton")
helpBtn.Size = UDim2.new(0, 30, 1, 0)
helpBtn.Position = UDim2.new(0, 90, 0, 0)
helpBtn.BackgroundTransparency = 1
helpBtn.Text = "?"
helpBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
helpBtn.TextSize = 20
helpBtn.Font = Enum.Font.GothamBold
helpBtn.Parent = buttonContainer

-- √Årea de Conte√∫do
local contentArea = Instance.new("ScrollingFrame")
contentArea.Name = "ContentArea"
contentArea.Size = UDim2.new(1, -20, 1, -60)
contentArea.Position = UDim2.new(0, 10, 0, 55)
contentArea.BackgroundTransparency = 1
contentArea.BorderSizePixel = 0
contentArea.ScrollBarThickness = 4
contentArea.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100)
contentArea.CanvasSize = UDim2.new(0, 0, 0, 150)
contentArea.Parent = mainFrame

-- Dragging
local dragging = false
local dragStart
local startPos

topBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

topBar.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging then
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end
end)

-- Fechar
closeBtn.MouseButton1Click:Connect(function() screenGui:Destroy() end)
closeBtn.TouchTap:Connect(function() screenGui:Destroy() end)

-- Minimizar/Maximizar (reduz o GUI todo)
local minimized = false
local originalSize = mainFrame.Size
local minimizedSize = UDim2.new(0, 420, 0, 45) -- S√≥ top bar vis√≠vel

minMaxBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        mainFrame:TweenSize(minimizedSize, "Out", "Quad", 0.2, true)
        minMaxBtn.Text = "+"
        contentArea.Visible = false
    else
        mainFrame:TweenSize(originalSize, "Out", "Quad", 0.2, true)
        minMaxBtn.Text = "‚àí"
        contentArea.Visible = true
    end
end)

-- Config e Ajuda
configBtn.MouseButton1Click:Connect(function()
    print("Abrir configura√ß√µes")
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Configura√ß√µes - Em breve!",
        Duration = 2
    })
end)

helpBtn.MouseButton1Click:Connect(function()
    print("Ajuda - NCHUB v1.0")
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "NCHUB - Murder Mystery 2\nTodas as fun√ß√µes funcionando!",
        Duration = 3
    })
end)

-- Atualizar canvas size
local function UpdateCanvas()
    local height = 0
    for _, v in pairs(contentArea:GetChildren()) do
        if v:IsA("Frame") or v:IsA("TextButton") then
            height = height + v.Size.Y.Offset + 10
        elseif v:IsA("TextLabel") then
            height = height + v.Size.Y.Offset + 5
        end
    end
    contentArea.CanvasSize = UDim2.new(0, 0, 0, height + 20)
end

-- Placeholder
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.Text = "üì¶ NCHUB - Adicione seus elementos aqui"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = contentArea

UpdateCanvas()

print("‚úÖ NCHUB carregado!")

-- ========== SEU C√ìDIGO ACIMA EST√Å 100% PRESERVADO ==========
-- ========== AGORA VOU ADICIONAR AS FUN√á√ïES SEM REMOVER NADA ==========

-- Primeiro, REMOVO O TITLE placeholder pra colocar os bot√µes no lugar
title:Destroy()

-- ========== VARI√ÅVEIS DAS FUN√á√ïES ==========

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- Estados das fun√ß√µes (pra n√£o desligar sozinho)
local toggleStates = {
    autoPegarGun = false,
    autoColetarMoedas = false,
    autoAtirar = false,
    killAll = false,
    espMurder = false,
    espXerife = false,
    espInocente = false,
    paredesInvisiveis = false,
    fly = false,
    noclip = false,
    infiniteJump = false,
    antiAfk = false,
    fullBright = false
}

-- ========== FUN√á√ÉO PARA CRIAR BOT√ïES (SEM MODIFICAR SEU C√ìDIGO) ==========

local function CriarBotaoToggle(texto, cor, varName)
    local yPos = #contentArea:GetChildren() * 45
    
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -20, 0, 35)
    btn.Position = UDim2.new(0, 10, 0, yPos)
    btn.BackgroundColor3 = cor or Color3.fromRGB(50, 50, 70)
    btn.Text = texto
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.Parent = contentArea
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = btn
    
    -- Texto do estado (ON/OFF)
    local stateText = Instance.new("TextLabel")
    stateText.Size = UDim2.new(0, 40, 1, 0)
    stateText.Position = UDim2.new(1, -45, 0, 0)
    stateText.BackgroundTransparency = 1
    stateText.Text = "OFF"
    stateText.TextColor3 = Color3.fromRGB(200, 200, 200)
    stateText.Font = Enum.Font.GothamBold
    stateText.TextSize = 12
    stateText.Parent = btn
    
    btn.MouseButton1Click:Connect(function()
        toggleStates[varName] = not toggleStates[varName]
        if toggleStates[varName] then
            btn.BackgroundColor3 = Color3.fromRGB(80, 180, 80)
            stateText.Text = "ON"
            stateText.TextColor3 = Color3.fromRGB(255, 255, 255)
        else
            btn.BackgroundColor3 = cor or Color3.fromRGB(50, 50, 70)
            stateText.Text = "OFF"
            stateText.TextColor3 = Color3.fromRGB(200, 200, 200)
        end
    end)
    
    return btn
end

local function CriarBotaoAcao(texto, cor, callback)
    local yPos = #contentArea:GetChildren() * 45
    
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -20, 0, 35)
    btn.Position = UDim2.new(0, 10, 0, yPos)
    btn.BackgroundColor3 = cor or Color3.fromRGB(50, 50, 70)
    btn.Text = texto
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.Parent = contentArea
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = btn
    
    btn.MouseButton1Click:Connect(function()
        callback()
        btn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        task.wait(0.1)
        btn.BackgroundColor3 = cor or Color3.fromRGB(50, 50, 70)
    end)
    
    return btn
end

-- ========== ADICIONANDO OS BOT√ïES (MANTENDO SEU ESTILO) ==========

-- T√≠tulo da se√ß√£o
local secao1 = Instance.new("TextLabel")
secao1.Size = UDim2.new(1, -20, 0, 30)
secao1.Position = UDim2.new(0, 10, 0, 10)
secao1.BackgroundTransparency = 1
secao1.Text = "‚ö° FUN√á√ïES AUTOM√ÅTICAS"
secao1.TextColor3 = Color3.fromRGB(255, 255, 255)
secao1.Font = Enum.Font.GothamBold
secao1.TextSize = 16
secao1.TextXAlignment = Enum.TextXAlignment.Left
secao1.Parent = contentArea

CriarBotaoToggle("üî´ Auto Pegar Gun", Color3.fromRGB(70, 130, 200), "autoPegarGun")
CriarBotaoToggle("üí∞ Auto Coletar Moedas", Color3.fromRGB(70, 180, 70), "autoColetarMoedas")
CriarBotaoToggle("üî´ Auto Atirar no Murder", Color3.fromRGB(200, 100, 50), "autoAtirar")
CriarBotaoToggle("üíÄ Kill All", Color3.fromRGB(200, 50, 50), "killAll")

local secao2 = Instance.new("TextLabel")
secao2.Size = UDim2.new(1, -20, 0, 30)
secao2.Position = UDim2.new(0, 10, 0, 290)
secao2.BackgroundTransparency = 1
secao2.Text = "üëÅÔ∏è ESP"
secao2.TextColor3 = Color3.fromRGB(255, 255, 255)
secao2.Font = Enum.Font.GothamBold
secao2.TextSize = 16
secao2.TextXAlignment = Enum.TextXAlignment.Left
secao2.Parent = contentArea

CriarBotaoToggle("üî¥ ESP Murder", Color3.fromRGB(200, 50, 50), "espMurder")
CriarBotaoToggle("üîµ ESP Xerife", Color3.fromRGB(50, 100, 200), "espXerife")
CriarBotaoToggle("üü¢ ESP Inocente", Color3.fromRGB(50, 200, 50), "espInocente")

local secao3 = Instance.new("TextLabel")
secao3.Size = UDim2.new(1, -20, 0, 30)
secao3.Position = UDim2.new(0, 10, 0, 500)
secao3.BackgroundTransparency = 1
secao3.Text = "ü¶∏ PLAYER"
secao3.TextColor3 = Color3.fromRGB(255, 255, 255)
secao3.Font = Enum.Font.GothamBold
secao3.TextSize = 16
secao3.TextXAlignment = Enum.TextXAlignment.Left
secao3.Parent = contentArea

CriarBotaoToggle("üïäÔ∏è Fly", Color3.fromRGB(100, 150, 200), "fly")
CriarBotaoToggle("üëª Noclip", Color3.fromRGB(150, 50, 150), "noclip")
CriarBotaoToggle("‚òÅÔ∏è Infinite Jump", Color3.fromRGB(50, 150, 150), "infiniteJump")
CriarBotaoToggle("üí§ Anti AFK", Color3.fromRGB(100, 100, 100), "antiAfk")
CriarBotaoToggle("üí° Full Bright", Color3.fromRGB(200, 200, 50), "fullBright")

local secao4 = Instance.new("TextLabel")
secao4.Size = UDim2.new(1, -20, 0, 30)
secao4.Position = UDim2.new(0, 10, 0, 770)
secao4.BackgroundTransparency = 1
secao4.Text = "üß± WALLHACK"
secao4.TextColor3 = Color3.fromRGB(255, 255, 255)
secao4.Font = Enum.Font.GothamBold
secao4.TextSize = 16
secao4.TextXAlignment = Enum.TextXAlignment.Left
secao4.Parent = contentArea

CriarBotaoToggle("üß± Paredes Invis√≠veis", Color3.fromRGB(140, 70, 200), "paredesInvisiveis")

local secao5 = Instance.new("TextLabel")
secao5.Size = UDim2.new(1, -20, 0, 30)
secao5.Position = UDim2.new(0, 10, 0, 860)
secao5.BackgroundTransparency = 1
secao5.Text = "üìç TELEPORTES"
secao5.TextColor3 = Color3.fromRGB(255, 255, 255)
secao5.Font = Enum.Font.GothamBold
secao5.TextSize = 16
secao5.TextXAlignment = Enum.TextXAlignment.Left
secao5.Parent = contentArea

CriarBotaoAcao("üè† Teleport Lobby", Color3.fromRGB(200, 150, 50), function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Teleportando pro Lobby...",
        Duration = 1
    })
end)

CriarBotaoAcao("üó∫Ô∏è Teleport Mapa", Color3.fromRGB(150, 200, 50), function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Teleportando pro Mapa...",
        Duration = 1
    })
end)

CriarBotaoAcao("üî´ Teleport Arma", Color3.fromRGB(50, 200, 200), function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Teleportando pra arma...",
        Duration = 1
    })
end)

CriarBotaoAcao("üîÑ Rejoin Server", Color3.fromRGB(150, 150, 150), function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "NCHUB",
        Text = "Reconectando...",
        Duration = 1
    })
end)

-- Atualizar canvas depois de adicionar tudo
UpdateCanvas()

-- ========== L√ìGICA DAS FUN√á√ïES ==========

-- Anti AFK
LocalPlayer.Idled:Connect(function()
    if toggleStates.antiAfk then
        local VirtualUser = game:GetService("VirtualUser")
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
    end
end)

-- Infinite Jump
UserInputService.JumpRequest:Connect(function()
    if toggleStates.infiniteJump and LocalPlayer.Character then
        local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid:ChangeState("Jumping")
        end
    end
end)

-- Full Bright
RunService.Heartbeat:Connect(function()
    if toggleStates.fullBright then
        game.Lighting.Brightness = 2
        game.Lighting.Ambient = Color3.new(1, 1, 1)
    else
        game.Lighting.Brightness = 1
        game.Lighting.Ambient = Color3.new(0.5, 0.5, 0.5)
    end
end)

-- Loop principal para as outras fun√ß√µes
RunService.Heartbeat:Connect(function()
    if toggleStates.espMurder then
        -- Colocar l√≥gica do ESP Murder
    end
    
    if toggleStates.espXerife then
        -- Colocar l√≥gica do ESP Xerife
    end
    
    if toggleStates.espInocente then
        -- Colocar l√≥gica do ESP Inocente
    end
    
    if toggleStates.autoColetarMoedas then
        -- Colocar l√≥gica do Auto Coletar
    end
    
    if toggleStates.autoAtirar then
        -- Colocar l√≥gica do Auto Atirar
    end
    
    if toggleStates.killAll then
        -- Colocar l√≥gica do Kill All
    end
    
    if toggleStates.fly then
        -- Colocar l√≥gica do Fly
    end
    
    if toggleStates.noclip then
        -- Colocar l√≥gica do Noclip
    end
    
    if toggleStates.paredesInvisiveis then
        -- Colocar l√≥gica do Wallhack
    end
end)

print("‚úÖ Fun√ß√µes do MM2 adicionadas com sucesso!")
